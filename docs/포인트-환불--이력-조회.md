

---

## π”„ ν¬μΈνΈ ν™λ¶ & μ΄λ ¥ μ΅°ν

### β… μ”κµ¬μ‚¬ν•­ μ”μ•½

| κΈ°λ¥     | μ„¤λ…                                                 |
| ------ | -------------------------------------------------- |
| ν¬μΈνΈ ν™λ¶ | κΈ°μ΅΄ μ¶©μ „ μ΄λ ¥μ„ κΈ°λ°μΌλ΅ ν¬μΈνΈλ¥Ό νμν•λ©°, **μ¤‘λ³µ ν™λ¶ λ°©μ§€ λ° λ™μ‹μ„± μ μ–΄** ν•„μ” |
| μ΄λ ¥ μ΅°ν  | μ‚¬μ©μμ μ „μ²΄ ν¬μΈνΈ λ‚΄μ—­(μ¶©μ „/ν™λ¶)μ„ **μµμ‹ μ + νμ΄μ§• ν•νƒ**λ΅ μ΅°ν κ°€λ¥     |

---

### β™οΈ ν™λ¶ μ²λ¦¬ νλ¦„

1. μ‚¬μ©μλ΅λ¶€ν„° `orderId`λ¥Ό μ…λ ¥λ°›μ•„ ν™λ¶ μ”μ²­ β†’ `POST /api/payments/refund`
2. ν™λ¶ IDλ” `μ›λ μ£Όλ¬Έ ID + "-REFUND"` ν•μ‹μΌλ΅ μƒμ„±
   μ: `ORDER_20250705_145428_1 β†’ ORDER_20250705_145428_1-REFUND`
3. ν™λ¶ IDκ°€ μ΄λ―Έ μ΅΄μ¬ν•λ©΄ `PointHistory.existsByOrderId()`λ¥Ό ν†µν•΄ μ¤‘λ³µ ν™λ¶ μ°¨λ‹¨
4. ν™λ¶ μ„±κ³µ μ‹ κΈ°μ΅΄ μ¶©μ „ κΈμ•΅λ§νΌ ν¬μΈνΈ μ°¨κ° + ν™λ¶ μ΄λ ¥ μ €μ¥

---

### π§  μ μ© κΈ°μ  μ”μ•½

| ν•­λ©        | μ„¤λ…                                                             |
| --------- | -------------------------------------------------------------- |
| λ‚™κ΄€μ  λ½     | `User` μ—”ν‹°ν‹°μ `@Version` ν•„λ“λ¥Ό ν†µν•΄ **λ™μ‹ ν™λ¶ μ¶©λ λ°©μ§€**                  |
| μ¤‘λ³µ ν™λ¶ λ°©μ§€  | ν™λ¶ IDλ¥Ό `-REFUND` μ ‘λ―Έμ‚¬λ΅ μƒμ„± ν›„, **μ΄λ―Έ μ΅΄μ¬ν•λ”μ§€ κ²€μ‚¬**ν•μ—¬ μ¤‘λ³µ μ°¨λ‹¨            |
| ν¬μΈνΈ μ°¨κ° μ²λ¦¬ | κΈ°μ΅΄ μ¶©μ „ κΈμ•΅ κΈ°μ¤€μΌλ΅ `user.usePoint(amount)` νΈμ¶ν•μ—¬ ν¬μΈνΈ νμ              |
| ν¬μΈνΈ μ΄λ ¥ μ΅°ν | `GET /api/points/history?userId=1&page=0&size=3` ν•νƒλ΅ νμ΄μ§• μ΅°ν μ§€μ› |

---

### π§ ν…μ¤νΈ κ²°κ³Ό μ”μ•½

| ν…μ¤νΈ ν•­λ©       | ν™•μΈ κ²°κ³Ό                              |
| ------------ | ---------------------------------- |
| ν™λ¶ μ”μ²­ μ²λ¦¬     | β… ν¬μΈνΈ μ°¨κ° + ν™λ¶ μ΄λ ¥(`-REFUND`) μ €μ¥ ν™•μΈλ¨ |
| μ¤‘λ³µ ν™λ¶ μ°¨λ‹¨     | β… λ™μΌ μ£Όλ¬Έ IDμ— λ€ν•΄ μ¤‘λ³µ μ”μ²­ μ‹ μμ™Έλ΅ μ •μƒ μ²λ¦¬λ¨  |
| μ „μ²΄ μ΄λ ¥ νμ΄μ§• μ΅°ν | β… μµμ‹ μ μ¶©μ „/ν™λ¶ λ‚΄μ—­μ΄ νμ΄μ§• ν•νƒλ΅ μ •μƒ λ°ν™λ¨     |

---

### π“Έ ν…μ¤νΈ μμ‹ κ²°κ³Ό

| ν™λ¶ μ²λ¦¬ κ²°κ³Ό                                                      | μ „μ²΄ ν¬μΈνΈ μ΄λ ¥ μ΅°ν κ²°κ³Ό                                                |
| ------------------------------------------------------------- | -------------------------------------------------------------- |
| <img src="../images/payment-refund-example.png" width="340"/> | <img src="../images/payment-history-example.png" width="340"/> |

---

β”οΈ μ¶©μ „, ν™λ¶, μ΄λ ¥ μ΅°νκΉμ§€ ν¬μΈνΈ κΈ°λ¥μ΄ **μ •ν™•ν λ¶„λ¦¬λμ–΄ μ λ™μ‘ν•¨μ„ ν™•μΈ**ν–μµλ‹λ‹¤.

---
